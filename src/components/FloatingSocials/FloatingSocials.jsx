import React, { useState, useEffect } from 'react';
import { motion } from 'framer-motion';
import './FloatingSocials.css';

const FloatingSocials = () => {
  const [scrollY, setScrollY] = useState(0);

  useEffect(() => {
    const handleScroll = () => {
      setScrollY(window.scrollY);
    };

    window.addEventListener('scroll', handleScroll);
    return () => window.removeEventListener('scroll', handleScroll);
  }, []);

  // Animation variants for the container
  const containerVariants = {
    hidden: { opacity: 0, x: 100 },
    visible: {
      opacity: 1,
      x: 0,
      transition: {
        type: 'spring',
        stiffness: 100,
        when: "beforeChildren",
        staggerChildren: 0.2
      }
    }
  };

  // Animation variants for the individual icons
  const itemVariants = {
    hidden: { opacity: 0, x: 20 },
    visible: {
      opacity: 1,
      x: 0,
      transition: { type: 'spring', stiffness: 100 }
    }
  };

  return (
    <motion.div
      className="floating-socials"
      style={{
        top: `${Math.max(150, 150 + scrollY * 0.2)}px`
      }}
      variants={containerVariants}
      initial="hidden"
      animate="visible"
    >
      <motion.a
        href="https://t.me/intobacco"
        target="_blank"
        rel="noopener noreferrer"
        className="floating-socials__item floating-socials__item--telegram"
        variants={itemVariants}
        whileHover={{ scale: 1.1 }}
        whileTap={{ scale: 0.9 }}
        aria-label="Telegram"
      >
        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
          <path d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.894 8.221l-1.97 9.28c-.145.658-.537.818-1.084.508l-3-2.21-1.446 1.394c-.14.18-.357.295-.6.295-.002 0-.003 0-.005 0l.213-3.054 5.56-5.022c.24-.213-.054-.332-.373-.119l-6.868 4.326-2.96-.924c-.64-.204-.658-.64.135-.954l11.566-4.458c.538-.196 1.006.128.832.938z"/>
        </svg>
        <span className="floating-socials__tooltip">Telegram</span>
      </motion.a>

      <motion.a
        href="https://instagram.com/intobacco"
        target="_blank"
        rel="noopener noreferrer"
        className="floating-socials__item floating-socials__item--instagram"
        variants={itemVariants}
        whileHover={{ scale: 1.1 }}
        whileTap={{ scale: 0.9 }}
        aria-label="Instagram"
      >
        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
          <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/>
        </svg>
        <span className="floating-socials__tooltip">Instagram</span>
      </motion.a>

      <motion.a
        href="viber://chat?number=%2B380123456789"
        className="floating-socials__item floating-socials__item--viber"
        variants={itemVariants}
        whileHover={{ scale: 1.1 }}
        whileTap={{ scale: 0.9 }}
        aria-label="Viber"
      >
        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
          <path d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm.172 18.849c-3.944-.033-6.004-2.129-6.004-6.265 0-4.714 2.413-6.693 6.189-6.693 3.56 0 5.891 2.091 5.888 6.345-.003 4.007-2.056 6.607-6.073 6.613zm5.003-8.37c-.097-2.023-1.275-3.653-3.212-4.118v-.004c-.534-.138-1.161-.209-1.977-.209h-.001c-1.292.017-2.532.313-3.383 1.097-.901.832-1.192 1.832-1.216 3.182-.013.898-.013 1.794.01 2.679.125 2.694 1.901 3.985 4.21 4.126.604.037 1.202.004 1.801.004h.024c2.777-.08 4.421-1.919 4.516-4.631.007-.159.026-.319.038-.478v-.004c.043-1.204.017-1.445-.014-1.646l.004.002zm-3.258 3.097c-.327.483-.652.966-.674 1.75-.011.372-.038.577-.22.678-.209.142-.693.074-1.041-.008-1.707-.407-3.188-1.156-4.216-2.691-.508-.758-.847-1.656-1.123-2.591-.103-.351-.165-.705-.203-1.234-.297-.2.068-.643.366-.75.188-.035 1.013-.132 1.25-.1.217.029.379.108.505.282.172.236.285.482.378.738.172.48.368.962.62 1.403.145.255.335.371.607.307.197-.047.276-.219.29-.416.020-.267.033-.535.033-.803-.002-.562-.028-.643-.356-.884-.195-.145-.099-.462.196-.577.29-.112.591-.21.892-.323.209-.08.441-.057.598.067.339.266.676.542.964.862.278.307.346.732.074 1.096l-.04.057zm-4.319-2.699c-.013-.397.017-.687.376-.761.503-.104.925.123 1.176.513.134.21.193.461.161.905-.014.199-.138.32-.333.321-.218.000-.32-.125-.338-.363-.016-.207-.073-.408-.229-.531-.156-.123-.349-.12-.502.009-.259.219-.222.532-.281.783-.018.074-.028.15-.045.241zm1.187-1.135c-.101-.151-.204-.286-.29-.433-.351-.594-.913-.801-1.4-.776-.243.013-.361-.102-.387-.33-.021-.189.099-.337.307-.36.877-.095 1.849.459 2.217 1.269.103.226.132.455.162.68.018.143-.084.271-.242.318-.161.050-.283-.023-.351-.165-.058-.119-.088-.25-.106-.379-.004-.032-.002-.065-.002-.098-.003.001-.006.001-.009.001l.1.273zm1.071.144c-.315-.636-.833-1.168-1.55-1.376-.28-.082-.57-.115-.862-.139-.127-.01-.26-.021-.384-.062-.089-.03-.164-.111-.155-.24.009-.126.084-.215.203-.226.415-.039.818.006 1.215.123.628.185 1.122.544 1.501 1.063.202.277.343.59.427.937.038.158-.039.29-.187.339-.132.043-.268-.025-.31-.159-.028-.09-.042-.183-.058-.275.10.005-.033.019-.003.015h.163zm-3.871 4.015c.007.042-.018.088-.055.129-.118.131-.597.566-.843.622-.037.004-.073.009-.11.009-.194 0-.386-.067-.528-.263-.105-.146-.193-.304-.283-.461-.092-.159-.178-.322-.271-.481-.254-.433-.254-.433-.517-.007-.021.033-.043.066-.065.099-.126.193-.262.379-.379.577-.075.127-.167.213-.315.271-.194.076-.425.025-.544-.138-.012-.016-.023-.033-.038-.055-.022-.031-.238-.358-.249-.378-.128-.226-.134-.465-.002-.693.076-.132.188-.234.281-.35l.359-.443c.046-.057.091-.115.13-.178.125-.205.123-.445-.022-.63-.1-.128-.217-.243-.337-.352-.238-.219-.476-.437-.712-.658-.039-.036-.073-.078-.105-.12-.13-.171-.13-.37.001-.54.130-.17.354-.231.534-.148.087.04.171.088.252.145.132.092.259.192.387.29.053.041.105.082.161.121.27.185.554.185.823-.003.207-.144.406-.299.607-.45.1-.075.19-.147.365-.152.233-.007.412.103.513.305.067.135.044.266-.036.39-.008.012-.016.023-.025.034-.148.196-.303.387-.447.585-.071.098-.127.207-.179.318-.074.158-.062.318.035.467.115.176.245.341.373.507.15.196.307.388.453.587.055.076.09.17.107.265.033.192-.013.368-.1.53l.5.004zm-3.92-10.183c3.219 0 5.767 2.054 5.767 5.767 0 .219-.364.321-.458.096-.508-1.205-2.234-3.615-5.284-3.615h-.022c-3.048 0-4.775 2.41-5.283 3.615-.094.225-.459.123-.459-.096 0-3.713 2.549-5.767 5.768-5.767h-.029z"/>
        </svg>
        <span className="floating-socials__tooltip">Viber</span>
      </motion.a>
    </motion.div>
  );
};

export default FloatingSocials;
